!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.pell={})}(this,function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n={classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:["bold","italic","underline","strikethrough","heading1","heading2","paragraph","quote","olist","ulist","code","line","link","image","undo","redo"],defaultParagraphSeparator:"div"},r=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},i=function(t,e){return t.querySelector("."+n.classes[e])},o=function(t){return function(e){e.preventDefault();var n=e.target.closest("button");if(n){var r=n.classList.contains(t.classes.selected);l(n,t.classes.selected,!r);for(var i=n.getAttribute("data-pell-command"),o=n.getAttribute("data-pell-command-value"),c=t.actions[i],a=arguments.length,u=Array(a>1?a-1:0),s=1;s<a;s++)u[s-1]=arguments[s];c.result.apply(c,u)}}},l=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)},c=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a=function(t,e){var n=document.createElement(t);return n.className=e,n},u=function(t,e){var n=a("button",t.classes.button);return n.innerHTML=e,n},s=function(t,e,n){var r=u(t,e);return r.setAttribute("data-pell-command",n),r},d=function(t,e){var n=a("div",t.classes.actionbar);return e.forEach(function(e){var r=void 0;if("string"==typeof e&&(e=t.actions[e]),"object"==typeof e){switch(e.name){case"bold":r=s(t,'<b>B</b>',"bold");break;case"italic":r=s(t,'<i>I</i>',"italic");break;case"underline":r=s(t,'<u>U</u>',"underline");break;case"strikethrough":r=s(t,'<strike>S</strike>',"strikethrough");break;case"heading1":r=s(t,"<b>H<sub>1</sub></b>","heading1");break;case"heading2":r=s(t,"<b>H<sub>2</sub></b>","heading2");break;case"paragraph":r=s(t,"&#182;","paragraph");break;case"quote":r=s(t,"&#8220; &#8221;","quote");break;case"olist":r=s(t,"&#35;","olist");break;case"ulist":r=s(t,"&#8226;","ulist");break;case"code":r=s(t,"&lt;/&gt;","code");break;case"line":r=s(t,"&#8213;","line");break;case"link":r=s(t,"&#128279;","link");break;case"image":r=s(t,"&#128247;","image");break;case"undo":r=s(t,"&#8634;","undo");break;case"redo":r=s(t,"&#8635;","redo")}e.icon&&(r.innerHTML=e.icon),e.title&&r.setAttribute("title",e.title),e.result&&(t.actions[e.name]=e)}r&&n.appendChild(r)}),n},f=function(t,e,n){var r=document.createElement("div");return r.className=t.classes.content,r.contentEditable=!0,r.placeholder=e||"",r.addEventListener("input",function(t){var e=t.target.innerHTML;n&&n(e)}),r},p=function(t,e){e.actions=e.actions?e.actions.map(function(e){return"string"==typeof e?t.actions[e]:e}):Object.keys(t.actions).map(function(e){return t.actions[e]}),e.classes=e.classes?e.classes:{},"undefined"==typeof e.defaultParagraphSeparator&&(e.defaultParagraphSeparator=t.defaultParagraphSeparator);var n=e.classes;return Object.keys(t.classes).forEach(function(e){n[e]=n[e]?n[e]:t.classes[e]}),e},m=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement("div");return r=p(n,r),i.className=r.classes.editor,i.appendChild(d(r,r.actions)),t&&i.appendChild(f(r,r.placeholder,r.onChange)),r.styleWithCSS&&document.execCommand("styleWithCSS",!1,!0),r.defaultParagraphSeparator&&document.execCommand("defaultParagraphSeparator",!1,r.defaultParagraphSeparator),i},h=function(t,e){try{document.execCommand(t,!1,e)}catch(t){}};t.init=function(t){return m(t.element,t)},t.exec=h,Object.defineProperty(t,"__esModule",{value:!0})});
